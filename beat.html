<!DOCTYPE html>
<!--
    Beat Frequency Physics Simulation
    Originally created for Physics courses at Tacoma Community College
    Author: David Anderson
    Use and distribute freely
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Beat Frequency Simulation</title>
</head>
<body>

<label for="frequencyA">Choose a first frequency:</label>

<select name="Frequency A" id="frequencyA" onchange="chooseSrc()"></select>

<br/>

<label for="frequencyB">Choose a second frequency:</label>

<select name="Frequency B" id="frequencyB" onchange="chooseSrc()"></select>

<br/>

<audio controls id="beat">
    <source id="beatFile" src="">
    Error: browser does not support audio
</audio>

<script type="application/javascript">
    let frequencyA = document.getElementById("frequencyA");
    let frequencyB = document.getElementById("frequencyB");
    let audio = document.getElementById("beat");
    let source = document.getElementById("beatFile");

    let frequencies = {"500": 500, "501": 501, "502": 502, "503": 503, "504": 504,
        "A": 499, "B": 501.5, "C": 506, "D": 509};

    function loadFrequencies(select){
        for(let frequency in frequencies){
            let option = document.createElement("option");
            option.textContent = frequency;
            option.value = frequencies[frequency];
            select.appendChild(option);
        }
    }

    loadFrequencies(frequencyA);
    loadFrequencies(frequencyB);

    function chooseSrc() {
        let hzA = parseInt(frequencyA.value);
        let hzB = parseInt(frequencyB.value);

        if(hzA > hzB) {
            let temp = hzA;
            hzA = hzB;
            hzB = temp;
        }
        source.src = "audio/" + hzA + "-" + hzB + ".mp3";

        audio.load();
    }

</script>
</body>
</html>